<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <link rel="stylesheet" href="/static/admin.css">
        <script src="/static/plain-draggable.min.js"></script>
        <script src="/static/anim-event.min.js"></script>
        <script src="/static/leader-line.min.js"></script>
        <script src="/static/helper.js"></script>
        <script src="/static/levels.js"></script>
        <script src="/static/categories.js"></script>
        <script src="/static/settings.js"></script>
        <title>wizard</title>
    </head>
    <body class="theme-dark">
        <div id="toolbar">

            <!-- Top Buttons -->
            <div id="toolbar-top-buttons">

                <div class="toolbar-group">
                    <button id="add_level_button">create level</button>
                    <div class="toolbar-joined-line">
                        <button id="add_line_button">create line</button>
                        <button id="delete_line_button">delete line</button>
                    </div>
                </div>

                <div class="toolbar-group">
                    <button id="category-menu-button">categories<span class="edited-category-mark">*</span></button>
                    <button id="settings-menu-button">settings<span class="edited-category-mark">*</span></button>
                </div>

                <div class="toolbar-group">
                    <button id="save_button">save<span class="edited-category-mark">*</span></button>
                    <button id="sync_button"><span id="sync_button_label">sync</span><span class="edited-category-mark">*</span></button>
                </div>

				<div class="toolbar-group">
                    <div class="toolbar-joined-line">
                        <button id="export_button">export</button>
                        <button id="import_button">import</button>
                    </div>
				</div>
                
            </div>

            <!-- Toolbar Block Menu -->
            <div id="toolbar-level" class="toolbar-group toolbar-menu">

                <div class="toolbar-group">
                    <label for="level_name">name</label>
                    <input type="text" id="level_name">
                </div>

                <div class="toolbar-group">
                    <div class="toolbar-joined-line gap">
                        <div class="label-container">
                            <label for="level_nickname_suffix">nickname suffix</label>
                            <input type="text" id="level_nickname_suffix">
                        </div>
                        <div class="label-container no-flex-grow">
                            <label for="level_nickname_merge">merge</label>
                            <label class="switch">
                                <input type="checkbox" checked id="level_nickname_merge">
                                <span class="slider"></span>
                            </label>
                        </div>
                    </div>
                </div>

                <div class="toolbar-group">
                    <label for="level_link">link</label>
                    <textarea id="level_link"></textarea>
                </div>

                <div class="toolbar-group">
                    <div class="toolbar-joined-line gap">
                        <div class="label-container">
                            <label for="level_link">username</label>
                            <input type="text" id="level_username">
                        </div>
                        <div class="label-container">
                            <label for="level_link">password</label>
                            <input type="text" id="level_password">
                        </div>
                    </div>
                </div>

                <div class="toolbar-group">
                    <label for="level_solutions">solutions</label>
                    <textarea id="level_solutions"></textarea>
                </div>

                <div class="toolbar-group">
                    <label for="level_unlocks">unlocks</label>
                    <textarea id="level_unlocks"></textarea>
                </div>

                <div class="toolbar-group">
                    <label for="level_discord_channel">discord channel id</label>
                    <div class="toolbar-joined-line gap">
                        <input type="text" maxlength="20" id="level_discord_channel">
                        <button id="level_create_channel" class="small-button">create</button>
                    </div>
                </div>

                <div class="toolbar-group">
                    <label for="level_discord_role">discord role id</label>
                    <div class="toolbar-joined-line gap">
                        <input type="text" maxlength="20" id="level_discord_role">
                        <button id="level_create_role" class="small-button">create</button>
                    </div>
                </div>

                <div class="toolbar-group">
                    <label for="selectable_category_list">level category</label>
                    <div class="category_list_container">
                        <ul id="selectable_category_list" class="category-list"></ul>
                    </div>
                </div>
                
                <div class="toolbar-group">
                    <button id="delete_level_button">delete level</button>
                </div>

            </div>

            <!-- Toolbar Categories Menu -->
            <div id="toolbar-category" class="toolbar-group toolbar-menu">

                <div class="toolbar-group">
                    <label for="editable_category_list">category list</label>
					<div class="category_list_container">
                    	<ul id="editable_category_list" class="category-list"></ul>
					</div>
                </div>

                <div class="toolbar-group">
                    <div class="toolbar-joined-line">
                        <button id="add_category_button">+</button>
                        <button id="remove_category_button">-</button>
                    </div>
                </div>

                <div class="toolbar-group">
                    <label for="discord_category_name">category name</label>
                    <input type="text" id="discord_category_name">
                </div>

                <div class="toolbar-group" id="category_id">
                    <label for="discord_category_id">discord category id</label>
                    <div class="toolbar-joined-line gap">
                        <input type="text" id="discord_category_id">
                        <button id="discord_category_create" class="small-button">create</button>
                    </div>
                </div>

                <div class="toolbar-group">
                    <label for="discord_category_color">category color</label>
                    <input type="color" id="discord_category_color" value="#ff0000">
                </div>

            </div>

            <!-- Toolbar Nicknames Menu -->
            <div id="toolbar-nicknames" class="toolbar-group toolbar-menu">
                <div class="toolbar-group">
                    <label for="setting_nickname_prefix">prefix</label>
                    <input type="text" id="setting_nickname_prefix">
                </div>

                <div class="toolbar-group">
                    <label for="setting_nickname_separator">separator</label>
                    <input type="text" id="setting_nickname_separator">
                </div>

                <div class="toolbar-group">
                    <label for="setting_nickname_suffix">suffix</label>
                    <input type="text" id="setting_nickname_suffix">
                </div>

                <div class="toolbar-group">
                    <label for="setting_nickname_enable">display progress</label>
                    <label class="switch">
                        <input type="checkbox" checked id="setting_nickname_enable">
                        <span class="slider"></span>
                    </label>
                </div>

                <div class="toolbar-group" id="nicknames_discord_example">
                    <label for="nicknames_discord_example">discord example</label>
                    <div id="discord_container">
                        <div class="discord_message">
                            <img src="/static/avatar1.png">
                            <div class="discord_text_content">
                            <div class="discord_user">
                                <span class="discord_username">Catz</span>
                                <span class="discord_time">Today at 22:40</span>
                            </div>
                            <div class="discord_text">
                                <span>this is an example of one active level!</span>
                            </div>
                            </div>
                        </div>
                        <br>
                        <div class="discord_message">
                            <img src="/static/avatar2.png">
                            <div class="discord_text_content">
                            <div class="discord_user">
                                <span class="discord_username">weaver</span>
                                <span class="discord_time">Today at 22:40</span>
                            </div>
                            <div class="discord_text">
                                <span>this is an example of multiple active levels!</span>
                            </div>
                            </div>
                        </div>
                        <br>
                        <div class="discord_message">
                            <img src="/static/avatar3.png">
                            <div class="discord_text_content">
                            <div class="discord_user">
                                <span class="discord_username">owlbotowlbotowlbotowlbotowlbotow</span>
                                <span class="discord_time">Today at 22:40</span>
                            </div>
                            <div class="discord_text">
                                <span>this is an example of a name that's too long!</span>
                            </div>
                            </div>
                        </div>
                    </div>
                    <div id="nicknames_disabled_warning" class="discord_warning" style="display: none">
                        nicknames are disabled globally
                    </div>
                </div>

                <div class="toolbar-group">
                    <div class="discord_warning">
                        discord name character limit is 32
                    </div>
                </div>

            </div>

            <!-- Toolbar Completionist Menu -->
            <div id="toolbar-completionist" class="toolbar-group toolbar-menu">

                <div class="toolbar-group">
                    <label for="setting_completionist_enable_nickname">award nickname</label>
                    <label class="switch">
                        <input type="checkbox" checked id="setting_completionist_enable_nickname">
                        <span class="slider"></span>
                    </label>
                </div>

                <div class="toolbar-group">
                    <label for="setting_completionist_badge">nickname badge</label>
                    <input type="text" id="setting_completionist_badge">
                </div>

                <div class="toolbar-group">
                    <label for="setting_completionist_enable_role">award role</label>
                    <label class="switch">
                        <input type="checkbox" checked id="setting_completionist_enable_role">
                        <span class="slider"></span>
                    </label>
                </div>

                <div class="toolbar-group">
                    <label for="setting_completionist_role">discord role id</label>
                    <div class="toolbar-joined-line gap">
                        <input type="text" maxlength="20" id="setting_completionist_role">
                        <button id="setting_completionist_create_role" class="small-button">create</button>
                    </div>
                </div>

            </div>

            <!-- Toolbar Admin Menu -->
            <div id="toolbar-admin" class="toolbar-group toolbar-menu">

                <div class="toolbar-group">
                    <label for="setting_admin_enable">admin nickname</label>
                    <label class="switch">
                        <input type="checkbox" checked id="setting_admin_enable">
                        <span class="slider"></span>
                    </label>
                </div>

                <div class="toolbar-group">
                    <label for="setting_admin_badge">nickname badge</label>
                    <input type="text" id="setting_admin_badge">
                </div>

                <div class="toolbar-group">
                    <label for="setting_admin_role">discord role id</label>
                    <input type="text" maxlength="20" id="setting_admin_role">
                </div>

            </div>

            <!-- Toolbar Settings Menu -->
            <div id="toolbar-settings" class="toolbar-group toolbar-menu">
                
                <div class="toolbar-group">
                    <button id="nicknames-menu-button">nicknames</button>
                </div>

                <div class="toolbar-group">
                    <button id="completionist-menu-button">completionist</button>
                </div>

                <div class="toolbar-group">
                    <button id="admin-menu-button">admin</button>
                </div>

                <div class="toolbar-group">
                    <label for="setting_bot_token">bot token</label>
                    <div class="toolbar-joined-line gap">
                        <input type="password" id="setting_bot_token">
                        <button id="show_bot_token" class="small-button">
                            <img src="/static/eye_open.svg" style="width: 23px; opacity: 0.4">
                        </button>
                    </div>
                </div>

                <div class="toolbar-group">
                    <label for="setting_key">key</label>
                    <div class="toolbar-joined-line gap">
                        <input type="password" id="setting_key">
                        <button id="show_key" class="small-button">
                            <img src="/static/eye_open.svg" style="width: 23px; opacity: 0.4">
                        </button>
                    </div>
                </div>

                <div class="toolbar-group">
                    <label for="setting_guild">discord guild id</label>
                    <input type="text" id="setting_guild">
                </div>

                <div class="toolbar-group">
                    <label for="setting_guild">discord invite url</label>
                    <input type="text" id="setting_guild_invite">
                </div>

				<div class="toolbar-group">
                    <label for="setting_embed_color">embed color</label>
                    <input type="color" id="setting_embed_color">
                </div>

				<div class="toolbar-group">
                    <label for="setting_style">leaderboard style</label>
                    <select id="setting_style"></select>
                </div>

				<div class="toolbar-group">
                    <label for="setting_auth_in_link">auth in link</label>
                    <label class="switch">
                        <input type="checkbox" id="setting_auth_in_link">
                        <span class="slider"></span>
                    </label>
                </div>

                <div class="toolbar-group">
                    <label for="setting_skipto_enable">enable skipto</label>
                    <label class="switch">
                        <input type="checkbox" id="setting_skipto_enable">
                        <span class="slider"></span>
                    </label>
                </div>

                <div class="toolbar-group">
                    <label for="setting_nickname_disable_all">disable nickname updates</label>
                    <label class="switch">
                        <input type="checkbox" checked id="setting_nickname_disable_all">
                        <span class="slider"></span>
                    </label>
                </div>

                <div class="toolbar-group">
                    <label for="setting_grid">enable grid</label>
                    <label class="switch">
                        <input type="checkbox" checked id="setting_grid">
                        <span class="slider"></span>
                    </label>
                </div>

                <div class="toolbar-group">
                    <label for="setting_tooltips">enable tooltips</label>
                    <label class="switch">
                        <input type="checkbox" checked id="setting_tooltips">
                        <span class="slider"></span>
                    </label>
                </div>

				<div class="toolbar-group">
                    <label for="setting_public_url">public url</label>
                    <input type="text" id="setting_public_url">
                </div>

				<div class="toolbar-group">
                    <label for="setting_enigmatics_token">enigmatics.org token</label>
                    <div class="toolbar-joined-line gap">
                        <input type="password" id="setting_enigmatics_token">
                        <button id="show_enigmatics_token" class="small-button">
                            <img src="/static/eye_open.svg" style="width: 23px; opacity: 0.4">
                        </button>
                    </div>
                </div>

            </div>
        </div>

        <!-- Grid Container -->
        <div id="container">
            <div id="background">
                <svg id="grid">
                    <defs>
                       <pattern id="smallGrid" width="20" height="20" patternUnits="userSpaceOnUse">
                          <path d="M 20 0 L 0 0 L 0 20 L 20 20" fill="var(--bg-grid)" stroke="var(--border-subgrid)" stroke-width="0.1"/>
                       </pattern>
                       <pattern id="bigGrid" width="200" height="200" patternUnits="userSpaceOnUse">
                          <rect width="200" height="200" fill="url(#smallGrid)"/>
                          <path d="M 200 0 L 0 0 0 200" fill="none" stroke="var(--border-grid)" stroke-width="0.2"/>
                       </pattern>
                    </defs>
                    <rect id="main" fill="url(#bigGrid)" width="8000px" height="5000px"/>
                </svg>
            </div>
        </div>

        <!-- Dialogs -->
        <div id="page-overlay">

            <!-- Delete Dialog -->
            <div id="delete_popup" class="popup">
                <div class="toolbar-group">
                    are you sure you want to delete "<span id="delete_popup_name"></span>"?
                </div>

                <div class="toolbar-group">
                    <input type="checkbox" class="delete_popup_checkbox" id="level_delete_channel">
                    also delete channel
                </div>

                <div class="toolbar-group">
                    <input type="checkbox" class="delete_popup_checkbox" id="level_delete_role">
                    also delete role
                </div>

                <div class="toolbar-group">
                    <div class="toolbar-joined-line">
                        <button id="level_delete_ok_button">ok</button>
                        <button id="level_delete_cancel_button">cancel</button>
                    </div>
                </div>
            </div>

            <!-- Set Name Dialog -->
            <div id="name_popup" class="popup">

                <div class="toolbar-group">
                    name "<span id="name_popup_name"></span>"'s <span id="name_popup_object"></span> to
                </div>

                <div class="toolbar-group">
                    <input type="text" id="object_name">
                </div>

                <div class="toolbar-group">
                    <div class="toolbar-joined-line">
                        <button id="object_name_ok_button">ok</button>
                        <button id="object_name_cancel_button">cancel</button>
                    </div>
                </div>

            </div>

            <!-- Import Dialog -->
            <div id="import_popup" class="popup">

                <div class="toolbar-group">
                    <div id="upload-file-wrapper">
                        <svg class="upload-file-icon" xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 50 50">
                            <path d="M48.4 26.5c-.9 0-1.7.7-1.7 1.7v11.6h-43.3v-11.6c0-.9-.7-1.7-1.7-1.7s-1.7.7-1.7 1.7v13.2c0 .9.7 1.7 1.7 1.7h46.7c.9 0 1.7-.7 1.7-1.7v-13.2c0-1-.7-1.7-1.7-1.7zm-24.5 6.1c.3.3.8.5 1.2.5.4 0 .9-.2 1.2-.5l10-11.6c.7-.7.7-1.7 0-2.4s-1.7-.7-2.4 0l-7.1 8.3v-25.3c0-.9-.7-1.7-1.7-1.7s-1.7.7-1.7 1.7v25.3l-7.1-8.3c-.7-.7-1.7-.7-2.4 0s-.7 1.7 0 2.4l10 11.6z"></path>
                        </svg>
                        
                        <div>
                            <label for="import_file_input" class="import_file_button">choose a file</label>
                            <span style="display: inline-block">or drop it here</span>
                        </div>

                        <i id="imported_file_name">no file selected</i>
                        <input type="file" id="import_file_input">
                    </div>
                </div>

                <div class="toolbar-group">
                    <p>note: importing into a non-empty instance is not supported and may cause issues.</p>
                    <p>unsaved changes will be lost.</p>
                    <p>after importing you might need to sync to update discord roles and names.</p>
                </div>

                <div class="toolbar-group">
                    <div class="toolbar-joined-line">
                        <button id="import_ok_button">ok</button>
                        <button id="import_cancel_button">cancel</button>
                    </div>
                </div>
            </div>

            <!-- Unsaved Changes Dialog -->
            <div id="unsaved_changes_popup" class="popup">

                <div class="toolbar-group">
                    <p>you have unsaved changes.</p>
                    <p>are you sure you want to close the tab?</p>
                </div>
                
                <div class="toolbar-group">
                    <div class="toolbar-joined-line">
                        <button id="unsaved_changes_ok_button">ok</button>
                        <button id="unsaved_changes_cancel_button">cancel</button>
                    </div>
                </div>
            </div>

            <!-- Saving Dialog -->
            <div id="saving_popup" class="popup">
                <div class="toolbar-group">
                    saving...
                </div>
            </div>

            <!-- Syncing Dialog -->
            <div id="sync_popup" class="popup">

                <div class="toolbar-group">
                    discord sync
                </div>

                <div class="toolbar-group">
                    <textarea readonly id="sync_log"></textarea>
                </div>

                <div class="toolbar-group">
                    <button id="sync_close_button">close</button>
                </div>
            </div>

        </div>
    </body>
</html>
